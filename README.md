# MySQL 结构同步工具

一个基于 Web 的 MySQL 数据库结构同步工具，提供可视化界面进行数据库结构比对和 SQL 脚本生成。

## ✨ 功能特性

- 🔗 **连接管理** - 管理多个 MySQL 数据库连接配置
- 🔍 **结构比对** - 智能比对源数据库和目标数据库的结构差异
- 📊 **可视化展示** - 直观展示表结构变更（新增、修改、删除）
- 💾 **SQL 生成** - 自动生成结构同步所需的 SQL 脚本
- 🎨 **语法高亮** - SQL 关键词彩色高亮显示
- 📋 **选择性同步** - 支持选择特定表进行同步
- 🌐 **DDL 对比** - 并排对比源表和目标表的 CREATE TABLE 语句
- 🎯 **现代化 UI** - 采用 Element Plus，界面美观流畅

## 🛠️ 技术栈

### 前端
- **Vue 3** - 渐进式 JavaScript 框架
- **Element Plus** - 基于 Vue 3 的组件库
- **Vite** - 下一代前端构建工具
- **Vue Router** - 官方路由管理器

### 后端
- **Node.js** - JavaScript 运行时
- **Express** - Web 应用框架
- **mysql2** - MySQL 客户端
- **CORS** - 跨域资源共享支持

## 📦 安装

### 环境要求
- Node.js 16.0 或更高版本
- MySQL 8.0 或更高版本

### 克隆项目
```bash
git clone https://github.com/doubleninth99/mysql_sync.git
cd mysql_sync
```

### 安装依赖

**后端依赖**
```bash
cd server
npm install
```

**前端依赖**
```bash
cd client
npm install
```

## 🚀 运行

### 启动后端服务器
```bash
cd server
node server.js
```
服务器将运行在 `http://localhost:3000`

### 启动前端开发服务器
```bash
cd client
npm run dev
```
前端将运行在 `http://localhost:5173`

## 📖 使用说明

### 1. 管理数据库连接

1. 进入"连接管理"页面
2. 点击"新建连接"按钮
3. 填写连接信息：
   - 连接名称
   - 主机地址
   - 端口（默认 3306）
   - 用户名
   - 密码
4. 点击"测试连接"验证连接
5. 点击"保存"

### 2. 比对数据库结构

1. 进入"结构同步"页面
2. 选择源数据库连接和数据库
3. 选择目标数据库连接和数据库
4. 点击"开始比对"

### 3. 查看比对结果

比对完成后，系统会显示：
- **表列表** - 展示所有有差异的表
- **操作类型** - 用不同颜色图标表示（绿色=新增，橙色=修改，红色=删除）
- **SQL 预览** - 点击表名查看对应的同步 SQL
- **DDL 对比** - 切换到"DDL 比较"标签页查看完整的建表语句对比

### 4. 生成同步脚本

1. 勾选需要同步的表
2. 点击"下一步：部署脚本"
3. 查看生成的 SQL 脚本（带语法高亮）
4. 点击"复制 SQL"将脚本复制到剪贴板
5. 在目标数据库中执行脚本

## 🎨 功能展示

### 连接管理
管理所有 MySQL 数据库连接，支持添加、编辑、删除和测试连接。

### 结构比对
- 源/目标数据库选择界面，采用卡片式设计
- 自动识别结构差异
- 支持表结构、索引、外键的比对

### SQL 生成
- 自动生成 `CREATE TABLE`、`ALTER TABLE`、`DROP TABLE` 语句
- 语法高亮显示（关键词、字符串、数字、标识符）
- 支持一键复制

## ⚙️ 配置说明

### 连接存储
连接配置保存在 `server/connections.json` 文件中（已添加到 .gitignore）

### 端口配置
- 后端端口：3000（可在 `server/server.js` 中修改）
- 前端端口：5173（可在 `client/vite.config.js` 中修改）

## ⚠️ 注意事项

1. **数据安全**
   - 本工具仅比对和生成 SQL，不会自动执行任何修改操作
   - 建议在生产环境使用前，先在测试环境验证生成的 SQL

2. **权限要求**
   - 需要数据库用户具有 `SELECT` 权限以读取结构信息
   - 需要访问 `information_schema` 数据库

3. **支持范围**
   - 当前版本支持表结构、列、索引、外键的比对
   - 不支持视图、存储过程、触发器的比对

4. **连接管理**
   - 密码以明文存储在本地，请注意文件安全
   - 建议使用专门的数据库账户，限制权限

## 🔄 更新日志

### v1.0.0 (2025-11-22)
- ✅ 初始版本发布
- ✅ 实现基本的结构比对功能
- ✅ 支持 SQL 语法高亮
- ✅ 现代化 UI 设计

## 📝 许可证

MIT License

## 👤 作者

**nfq**

## 🤝 贡献

欢迎提交 Issue 和 Pull Request！

## 📧 联系方式

如有问题或建议，请通过 GitHub Issues 联系。
